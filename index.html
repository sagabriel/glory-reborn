<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Checkout Form</title>

    <!-- Bootstrap core CSS -->
    <link href="https://getbootstrap.com/docs/4.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <!-- Custom styles for this template -->
    <link href="form-validation.css" rel="stylesheet">
  </head>

  <body class="bg-light">

    <div id="header" class="py-5">
      <img id="logo" src="C:\Users\shaira\Desktop\Glory Reborn Form/logo.png"> <!-- still need to change logo to the other(white?) version -->
      <h2 id="title">Glory Reborn T-shirt Order Form</h2> 
      <h6 id="sub_title"> Glory Reborn provides compassionate and holistic care to marginalized moms and babies of Cebu, Philippines. </h6>
    </div>
    <div class="container">
      <div class="row">
        <div class="column-left">
        <img id="myImage" src="Big Latch On 2018 Shirt.png" style="width:100%; overflow:hidden">
        </div>
        <div class="column-right">
        <div class="mb-3">
           <!--  <h3 id="shirt_design_header headers">Shirt Design</h3>
              <select class="header_input" name="shirtDesign" id="shirtDesign" onchange="selectforprices()">
                        <option disabled selected value=""></option>
                        <option value="Design 1">Design 1 (P 150) </option>
                        <option value="Design 2">Design 2 (P 200)</option>
                        <option value="Design 3">Design 3 (P 250)</option>
                        <option value="Design 4">Design 4 (P 350)</option>
              </select> -->
             <!--  <div id="color" style="visibility: hidden;display: none;">
              <h3 id="shirt_design_header headers">Color</h3>              
              
              <label id="black" class="black">
                 <input type="radio" name="color" id="blacks" value="black" class="displaynone" onchange="selectforprices()">
                 <div class="layer"></div>
                 <div class="button"><span></span></div>
              </label>

              <label id="lightblue" class="lightblue">
              <input type="radio" name="color" id="lightblues" value="lightblue" class="displaynone" onclick="selectforprices()">
              <div class="layer"></div>
              <div class="button"><span></span></div>
              </label>

              <label id="green" class="green">
              <input type="radio" name="color" id="greens" value="green" class="displaynone" onclick="selectforprices()">
              <div class="layer"></div>
              <div class="button"><span></span></div>
              </label>

              <label id="darkblue" class="darkblue">
              <input type="radio" name="color" id="darkblues" value="darkblue" class="displaynone" onclick="selectforprices()">
              <div class="layer"></div>
              <div class="button"><span></span></div>
              </label>
              </div> -->
            <h3 id="quantity_header headers">Quantity</h3>
              <input class="header_input" type="number" name="quantity" id="quantity" min="1" size="2"  oninput="selectforprices()">
            <h3 id="shirt_size_header headers">Shirt Size</h3>
              <select class="header_input" name="shirtSize" id="shirtSize" onchange="selectforprices()">
                        <option disabled selected value=""></option>
                        <option value="XS">XS</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
              </select>
            <h3 id="amount_header headers">Amount</h3>
              <input class="header_input" readonly type="text" id="amount" name="amount" size="3" value="" />
            <input id="add_item" type="submit" onclick="addItem()" value="Add Item"/>
            </div>
          </div>
        </div>
      <div class="mb-3" id="showitems" style="visibility: hidden;display: none;">
            <table id="myItems">
              <tr id="headers">
                <td id="shirt_design_header">Shirt Name</td>
                <!-- <td id="amount_header">Color</td>    -->
                <td id="quantity_header">Quantity</td>
                <td id="shirt_size_header">Shirt Size</td>
                <td id="amount_header">Amount</td>
                <td id="amount_header">Manage Items</td>
              </tr>
            </table>
        <div id="total_amount"><span>Total: </span><input readonly type="text" id="total" name="total" size="5" value="" /></div>
      </div>
      <div>
        <div id="billing_add">
          <!-- <h4 class="mb-3">Billing address</h4> -->
          <form class="needs-validation" novalidate>
            <div class="row">
              <div class="col-md-6 mb-3">
                <label for="firstName">First name</label>
                <input type="text" class="form-control" id="firstName" required>
                <div class="invalid-feedback">
                  Valid first name is required.
                </div>
              </div>
              <div class="col-md-6 mb-3">
                <label for="lastName">Last name</label>
                <input type="text" class="form-control" id="lastName" required>
                <div class="invalid-feedback">
                  Valid last name is required.
                </div>
              </div>
            </div>
            <div class="mb-3">
              <label for="email">Email</label>
              <input type="email" class="form-control" id="email" required>
              <div class="invalid-feedback">
                Please enter a valid email address for shipping updates.
              </div>
            </div>

            <div class="mb-3">
              <label for="phone">Phone number</label>
              <input type="tel" class="form-control" id="phone" pattern="^\d{11}$" required>
              <div class="invalid-feedback">
                Please enter a valid phone number.
              </div>
            </div>

            <div class="mb-3">
              <div class="radio">
                <label><input type="radio" id="venue" name="retrieval" onclick="choice()"> Claim at Venue</label>
              </div>
              <div id="ret_ven" style="display: none;">
                <div>
                  Please claim your order at the venue.<br><br>
                </div>
              </div>
              <div class="radio">
                <label><input type="radio" id="shipping" name="retrieval" onclick="choice()"> Ship to Address</label>
              </div>
              <div id="ret_add" style="visibility: hidden;">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" required>
                <div class="invalid-feedback">
                  Please enter your shipping address.
                </div>
              </div>
            </div>
            <div class="container2">
              <input  id="checkout" class="btn btn-primary btn-lg" type="submit" value="Pay with ML ePay"/>
              </div>

          </form>
            </div>

        </div>
      </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
     <script src="https://www.gstatic.com/firebasejs/5.2.0/firebase.js"></script>
    <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyAEJnoku-f04K8j0bnUW6J4gFTxzCErAxs",
      authDomain: "glory-reborn-v1.firebaseapp.com",
      databaseURL: "https://glory-reborn-v1.firebaseio.com",
      projectId: "glory-reborn-v1",
      storageBucket: "",
      messagingSenderId: "331654337078"
    };
    firebase.initializeApp(config);
    var db = firebase.database();
    var itemsRef = db.ref("items");
    //var itemscustomerRef = db.ref("items/customer");
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
    <script src="../../assets/js/vendor/popper.min.js"></script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <script src="../../assets/js/vendor/holder.min.js"></script>
    <script>
      (function() {
        'use strict';

        window.addEventListener('load', function() {
          var forms = document.getElementsByClassName('needs-validation');

          // Loop over them and prevent submission
          var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              }
              form.classList.add('was-validated');
            }, false);
          });
        }, false);
      })();

      // var modal = document.getElementById('myModal');
      // var btn = document.getElementById("checkout");
      // btn.onclick = function() {
      //     modal.style.display = "block";
      // }
      // window.onclick = function(event) {
      //     if (event.target == modal) {
      //         modal.style.display = "none";
      //     }
      // }

      function choice(){
        if (document.getElementById('venue').checked){
          document.getElementById('ret_ven').style.display = 'block';
          document.getElementById('ret_add').style.visibility = 'hidden';
        }
        else if (document.getElementById('shipping').checked){
          document.getElementById('ret_ven').style.display = 'none';
          document.getElementById('ret_add').style.visibility = 'visible';
        }
      }
       function submit(){
        var table = document.getElementById("myItems");
        // var total = document.getElementById("amount").value;
        var description="";
          for(var i = 2; i < table.rows.length; i++){
            description +="/shirtDesign: "+table.rows[i].cells[0].innerHTML+",quantity: "+table.rows[i].cells[1].innerHTML+",shirtSize: "+table.rows[i].cells[2].innerHTML+",amount: "+table.rows[i].cells[3].innerHTML+"/\n";
      }
        var data={
            customer:{
                firstName:document.getElementById("firstName").value,
                lastName:document.getElementById("lastName").value,
                email:document.getElementById("email").value,
                phone:document.getElementById("phone").value,
                address:document.getElementById("address").value,
                order:{
                  description: description,
                  total: document.getElementById("total").value
              }
            }
        }
        itemsRef.push(data);
    }

      function addItem(){
        // var colorvalue;
        //     var radios = document.getElementsByName('color');
        //     for (var i = 0, length = radios.length; i < length; i++)
        //     {
        //     if (radios[i].checked)
        //     {
        //     colorvalue=radios[i].value;
        //     break;
        //     }
        //     }
        if(document.getElementById("quantity").value>=1 && document.getElementById("shirtSize").value!="" /*&& document.getElementById("shirtDesign").value!="" && colorvalue!==undefined*/){
            var table = document.getElementById("myItems");
            var row = table.insertRow(1);
            var shirtDesign = row.insertCell(0);
            // shirtDesign.style.cssText = "font-weight: bold; padding-left: 5%;";
            // var color = row.insertCell(1);
            var quantity = row.insertCell(1);
            quantity.style.cssText = "padding-left: 10%;";
            var shirtSize = row.insertCell(2);
            shirtSize.style.cssText = "padding-left: 10%;";
            var amount = row.insertCell(3);
            amount.style.cssText = "padding-left: 10%;";
            var remove = row.insertCell(4);
            quantity.innerHTML =  document.getElementById("quantity").value;
            shirtSize.innerHTML = document.getElementById("shirtSize").value;
            // color.innerHTML = colorvalue;
            shirtDesign.innerHTML = "Big Latch On 2018 Shirt";//document.getElementById("shirtDesign").value;
            amount.innerHTML = document.getElementById("amount").value;
            var btnRemove = document.createElement("i");
            // var icon = document.createElement("i");
            // btnRemove.appendChild(icon);
            btnRemove.type = "button";
            btnRemove.value = " ";
            btnRemove.style.cssText = "color: #977BB8; background-color: transparent; font-size: 30px; cursor: pointer; margin-left: 35%;"; 
            btnRemove.setAttribute("onclick", "Remove(this);");
            btnRemove.setAttribute("class", "far fa-times-circle");
            btnRemove.setAttribute("title", "Remove item");
            // btnRemove.hover("class", "far fa-times");

            $(btnRemove).hover(function() {
                $(this).css({'color': '#FCBE35', 'margin-left': '38%', 'font-size': '30px'})
                btnRemove.setAttribute("class", "fas fa-times");
              }, function() {
                $(this).css({'color': '#977BB8', 'margin-left': '35%', 'font-size': '30px'})
                btnRemove.setAttribute("class", "far fa-times-circle");
              }
            );
            //  for (var y = 0, length = radios.length; y < length; y++)
            // {
            // if (radios[y].checked)
            // {
            // radios[y].checked=false;
            // break;
            // }
            // }
            remove.appendChild(btnRemove);
            getTotal();
        }
        else{
        }
    }

    function Remove(button) {
        var row = button.parentNode.parentNode;
        // var name = row.getElementsByTagName("td")[0].innerHTML;
        // if (confirm("Do you want to delete: " + name)) {
        var table = document.getElementById("myItems");
        //Delete the Table row using it's Index.
        table.deleteRow(row.rowIndex);
        getTotal();
        // }
    }

    function selectforprices(){
        var price;
        var amount;
        price=document.getElementById("quantity").value * 210;
        amount=document.getElementById("amount").getAttribute("value");
        document.getElementById("amount").setAttribute("value",price);
        // var colorvalue;
        // if(document.getElementById("shirtDesign").value=="Design 1"){
        //     if(document.getElementById("shirtSize").value=="XL"){
        //         price=document.getElementById("quantity").value * (150 + 15);
        //     }
        //     else{
        //         price=document.getElementById("quantity").value * 150;
        //     }
        //     amount=document.getElementById("amount").getAttribute("value");
        //     document.getElementById("amount").setAttribute("value",price);
        //     document.getElementById('myImage').src="black1.jpg";
        //     document.getElementById('color').style.display = 'block';
        //     document.getElementById('color').style.visibility = 'visible';
        //     document.getElementById('black').style.display = 'inline';
        //     document.getElementById('black').style.visibility = 'visible';
        //     document.getElementById('green').style.display = 'inline';
        //     document.getElementById('green').style.visibility = 'visible';
        //     document.getElementById('lightblue').style.display = 'none';
        //     document.getElementById('lightblue').style.visibility = 'hidden';
        //     document.getElementById('darkblue').style.display = 'none';
        //     document.getElementById('darkblue').style.visibility = 'hidden';
        //     if(document.getElementById("blacks").checked){
        //     document.getElementById('myImage').src="black1.jpg";
        //     }
        //     else if(document.getElementById("greens").checked){
        //     document.getElementById('myImage').src="green1.jpg";
        //     }
        // }
        // else if(document.getElementById("shirtDesign").value=="Design 2"){
        //     if(document.getElementById("shirtSize").value=="XL"){
        //         price=document.getElementById("quantity").value * (200 + 15);
        //     }
        //     else{
        //         price=document.getElementById("quantity").value * 200;
        //     }
        //     amount=document.getElementById("amount").getAttribute("value");
        //     document.getElementById("amount").setAttribute("value",price);
        //     document.getElementById('myImage').src="darkblue2.jpg";
        //     document.getElementById('color').style.display = 'block';
        //     document.getElementById('color').style.visibility = 'visible';
        //     document.getElementById('black').style.display = 'none';
        //     document.getElementById('black').style.visibility = 'hidden';
        //     document.getElementById('green').style.display = 'inline';
        //     document.getElementById('green').style.visibility = 'visible';
        //     document.getElementById('lightblue').style.display = 'none';
        //     document.getElementById('lightblue').style.visibility = 'hidden';
        //     document.getElementById('darkblue').style.display = 'inline';
        //     document.getElementById('darkblue').style.visibility = 'visible';
        //     if(document.getElementById("darkblues").checked){
        //     document.getElementById('myImage').src="darkblue2.jpg";
        //     }
        //     else if(document.getElementById("greens").checked){
        //     document.getElementById('myImage').src="green2.jpg";
        //     }
        // }
        // else if(document.getElementById("shirtDesign").value=="Design 3"){
        //     if(document.getElementById("shirtSize").value=="XL"){
        //         price=document.getElementById("quantity").value * (250 + 15);
        //     }
        //     else{
        //         price=document.getElementById("quantity").value * 250;
        //     }
        //     amount=document.getElementById("amount").getAttribute("value");
        //     document.getElementById("amount").setAttribute("value",price);
        //     document.getElementById('myImage').src="darkblue3.jpg";
        //     document.getElementById('color').style.display = 'block';
        //     document.getElementById('color').style.visibility = 'visible';
        //     document.getElementById('black').style.display = 'inline';
        //     document.getElementById('black').style.visibility = 'visible';
        //     document.getElementById('green').style.display = 'none';
        //     document.getElementById('green').style.visibility = 'hidden';
        //     document.getElementById('lightblue').style.display = 'none';
        //     document.getElementById('lightblue').style.visibility = 'hidden';
        //     document.getElementById('darkblue').style.display = 'inline';
        //     document.getElementById('darkblue').style.visibility = 'visible';
        //     if(document.getElementById("blacks").checked){
        //     document.getElementById('myImage').src="black3.jpg";
        //     }
        //     else if(document.getElementById("darkblues").checked){
        //     document.getElementById('myImage').src="darkblue3.jpg";
        //     }
        // }
        // else if(document.getElementById("shirtDesign").value=="Design 4"){
        //     if(document.getElementById("shirtSize").value=="XL"){
        //         price=document.getElementById("quantity").value * (350 + 15);
        //     }
        //     else{
        //         price=document.getElementById("quantity").value * 350;
        //     }
        //     amount=document.getElementById("amount").getAttribute("value");
        //     document.getElementById("amount").setAttribute("value",price);
        //     document.getElementById('myImage').src="lightblue4.jpg";
        //       document.getElementById('color').style.display = 'block';
        //     document.getElementById('color').style.visibility = 'visible';
        //     document.getElementById('black').style.display = 'none';
        //     document.getElementById('black').style.visibility = 'hidden';
        //     document.getElementById('green').style.display = 'none';
        //     document.getElementById('green').style.visibility = 'hidden';
        //     document.getElementById('lightblue').style.display = 'inline';
        //     document.getElementById('lightblue').style.visibility = 'visible';
        //     document.getElementById('darkblue').style.display = 'none';
        //     document.getElementById('darkblue').style.visibility = 'hidden';
        //     if(document.getElementById("lightblues").checked){
        //     document.getElementById('myImage').src="lightblue4.jpg";
        //     }
        // }
    }


    function getTotal(){
        var table = document.getElementById("myItems"), sumVal = 0;   
        for(var i = 1; i < table.rows.length; i++){
            sumVal = sumVal + parseInt(table.rows[i].cells[3].innerHTML);
        }
        // document.getElementById("val").innerHTML = "Total: &nbsp;" + sumVal;
         document.getElementById("total").setAttribute("value",sumVal);
         if(sumVal==0){
          document.getElementById('showitems').style.display = 'none';
        document.getElementById('showitems').style.visibility = 'hidden';
         }
         else{
          document.getElementById('showitems').style.display = 'block';
          document.getElementById('showitems').style.visibility = 'visible';
         }
    }

    </script>

  </body>
</html>